# Управление слоями

Каждый спрайт в ScrubJS может быть отрисован на определённом слое. Слои позволяют точно контролировать порядок отображения объектов на экране: что находится на переднем плане, а что — позади. Это особенно важно для создания сцены с фоном, персонажами, эффектами и UI-элементами.

## Как работает система слоёв

Каждому спрайту можно задать числовой приоритет через свойство `.layer`. Чем **выше значение**, тем **выше** он окажется в иерархии отрисовки.

```javascript
const background = new Sprite(stage);
const player = new Sprite(stage);
const effects = new Sprite(stage);

background.layer = 0; // Самый задний план
player.layer = 1;     // Основной персонаж
effects.layer = 2;    // Визуальные эффекты поверх игрока
```

По умолчанию все спрайты имеют `layer = 0`, поэтому рекомендуется явно задавать порядок при создании сцены.

## Динамическое изменение слоёв

Слои можно менять в любое время, например, для создания эффекта "прыжка на передний план" или "появления всплывающего окна".

### Пример: игрок прыгает выше — слой увеличивается
```javascript
player.forever(() => {
    if (player.y < 200) {
        player.layer = 3; // Поднимаем на передний план
    } else {
        player.layer = 1; // Возвращаем на обычный уровень
    }
});
```

Это особенно удобно при имитации глубины в 2D — например, когда персонаж может "зайти" за объект.

## Важные замечания

- При изменении `.layer` не нужно пересоздавать спрайт — изменения вступают в силу сразу.
- Если несколько спрайтов находятся на одном слое, порядок их создания определяет порядок отрисовки.
- `stage.render()` автоматически сортирует спрайты по `layer` перед отрисовкой каждого кадра.

## Резюме

| Значение layer | Назначение                  |
|----------------|-----------------------------|
| 0              | Фон, декорации              |
| 1–2            | Игроки, враги               |
| 3–4            | Объекты на переднем плане   |
| 5–9            | Визуальные эффекты, вспышки |
| 10+            | Интерфейс, меню             |
